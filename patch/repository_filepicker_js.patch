--- /datas/dev/moodle/moodle_gitworkspaces/moodle404/moodle2_version_org/repository/filepicker.js	2023-01-14 07:17:03.000000000 +0100
+++ /datas/dev/moodle/moodle_gitworkspaces/moodle404/moodle2_version/repository/filepicker.js	2023-01-19 09:13:29.869375510 +0100
@@ -1124,10 +1124,13 @@
                 return;
             }
             this.active_repo.nextpagerequested = true;
-            var nextpage = this.active_repo.page+1;
+            var nextpage = this.active_repo.page+1; 
             var args = {
                 page: nextpage,
-                repo_id: this.active_repo.id
+                repo_id: this.active_repo.id,
+                // UNISTRA DEV.
+                s: ((this.active_repo.searchtext!= undefined && this.active_repo.searchtext !=null && this.active_repo.searchtext!='') ?this.active_repo.searchtext:'')
+                //End Unistra Dev
             };
             var action = this.active_repo.issearchresult ? 'search' : 'list';
             this.request({
@@ -1605,6 +1608,9 @@
             this.active_repo.manage = data.manage?data.manage:null;
             // Warning message related to the file reference option, if applicable to the given repository.
             this.active_repo.filereferencewarning = data.filereferencewarning ? data.filereferencewarning : null;
+            // UNISTRA DEV.
+            this.active_repo.searchtext = data.searchtext?data.searchtext:null;
+            //End UNISTRA Dev
             this.print_header();
         },
         print_login: function(data) {
@@ -2014,6 +2020,9 @@
                     scope: this,
                     action:'searchform',
                     repository_id: this.active_repo.id,
+                    // UNISTRA DEV.
+                    search_text: this.active_repo.searchtext,
+                    //end Unistra dev
                     callback: function(id, obj, args) {
                         if (obj.repo_id == scope.active_repo.id && obj.form) {
                             // if we did not jump to another repository meanwhile
@@ -2021,6 +2030,11 @@
                             // Highlight search text when user click for search.
                             var searchnode = searchform.one('input[name="s"]');
                             if (searchnode) {
+                                // UNISTRA DEV.
+                                if(this.search_text){
+                                    searchnode.set('value',this.search_text);
+                                }
+                                //End Unistra dev
                                 searchnode.once('click', function(e) {
                                     e.preventDefault();
                                     this.select();
